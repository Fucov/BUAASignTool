# ClassSignTool BUAA 课程打卡助手

本项目提供了北京航空航天大学 iClass 平台的桌面端打卡工具，旨在简化课程签到流程。工具包含图形用户界面（GUI）和命令行界面（CLI）两个版本，以满足不同用户的使用偏好。

本项目参考了各个民间脚本，如有疑问可以提出issues。

## 免责声明

本项目为开源代码，使用者需自行选择是否使用，并应遵守北京航空航天大学的相关规定。因使用本项目产生的一切后果均由使用者本人承担。

## 项目简介

本工具通过模拟客户端请求，实现了与 iClass 平台的登录、课表获取和课程打卡等核心功能。与传统的基于网页二维码的方案不同，本项目通过直接调用接口完成操作，并提供了更丰富的交互选项。

### 主要特点

  * **两种操作模式**：
      * **图形界面 (GUI)**: 提供基于周视图的课表展示，操作直观，支持一键打卡整周课程。
      * **命令行 (CLI)**: 提供菜单式交互，支持指定单日、日期范围或从某天起连续打卡。
  * **便捷登录**：仅需输入学号即可登录，无需输入密码。
  * **自动化课表**：登录后，工具会自动获取指定日期的课程安排。
  * **灵活打卡**：用户可以自由选择为单门课程或多门课程执行打卡操作。
  * **日志记录 (GUI)**：图形界面版本提供详细的操作日志，方便追踪打卡状态和排查问题。

## 安装依赖

请先安装项目所需的第三方库。

1.  运行以下命令进行安装：
    ```bash
    pip install -r requirements.txt
    ```

## 使用步骤

下载项目文件后，您可以根据需要选择运行任一版本。

### 1\. 图形界面版 (GUI)

此版本提供了完整的可视化操作界面，推荐日常使用。

  * **运行应用**:
    ```bash
    python ClassSignToolWindows.py
    ```
  * **操作流程**:
    1.  在 "学号" 输入框中填入您的学号。
    2.  在 "学期设置" 中，正确设置本学期**第一周的周一**是哪一天。
    3.  点击 "🚀 登录系统" 按钮完成登录。
    4.  登录成功后，系统会自动跳转并加载当前周的课表。
    5.  您可以通过下拉菜单或 "上一周"/"下一周" 按钮切换周数。
    6.  点击课程卡片上的 "✅ 课程打卡" 按钮为单门课程打卡。
    7.  点击左侧控制面板的 "✅ 一键打卡本周" 按钮，可以尝试为当前显示周的所有课程进行打卡。

### 2\. 命令行版 (CLI)

此版本适合在无图形环境的服务端或喜欢命令行操作的用户。

  * **运行应用**:
    ```bash
    python ClassSignToolCLI.py
    ```
  * **操作流程**:
    1.  程序启动后，会提示您输入学号以完成登录。
    2.  登录成功后，会显示主菜单，包含以下选项：
          * `指定单个日期打卡`：为某一天的所有课程打卡。
          * `指定日期范围打卡`：循环处理一个日期区间内的所有课程。
          * `从指定日期开始连续打卡`：程序会从开始日期一直向后处理，直到连续7天没有课程为止。
    3.  根据菜单提示输入数字选择相应功能，并按指引输入日期（格式: `YYYYMMDD`）。

## 技术说明

  * 本项目基于 **Python 3** 开发。
  * **GUI 版本** 使用 `tkinter` 和 `ttkbootstrap` 库构建现代化图形界面。
  * **核心逻辑** 通过 `requests` 库向 iClass 服务器发送 HTTP 请求，模拟App的操作。
  * **主要 API 接口**:
      * **登录**: `https://iclass.buaa.edu.cn:8346/app/user/login.action`
      * **获取课表**: `https://iclass.buaa.edu.cn:8346/app/course/get_stu_course_sched.action`
      * **扫码签到**: `http://iclass.buaa.edu.cn:8081/app/course/stu_scan_sign.action`

## 常见问题

**Q: 为什么不需要输入密码？**
A: 本工具使用的登录接口仅需学号即可验证并获取会话信息（Session ID），因此简化了登录步骤。

**Q: 登录失败或看不到课程怎么办？**
A: 请检查：1. 学号是否输入正确；2. 网络连接(校园网环境)是否正常；3. (GUI版)学期开始日期是否设置正确。如果问题依旧，可能是 iClass 系统接口已更新。

**Q: 使用此工具签到会被发现吗？**
A: 从技术上讲，本工具发送的打卡请求与官方App完全一致。但任何自动化工具都存在被检测到的风险，请您务必遵守学校规定，并自行承担使用责任。

**Q: 打卡失败可能是什么原因？**
A: 常见原因包括：教师尚未开启签到、已经超过签到时间、您已经打过卡（重复打卡）、或网络问题。GUI版本的日志窗口会提供更详细的反馈信息。

希望本工具能为你的学习和签到管理带来便利！🚀